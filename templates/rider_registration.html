{% extends "base.html" %}

{% block title %}Riders Registration - Stallion Routes{% endblock %}

{% block content %}
<header>
    <nav class="navbar navbar-expand-lg px-4 bg-dark">
        <a class="navbar-brand" href="#">Stallion Routes</a>
        <div class="ms-auto">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="btn btn-sm btn-outline-light" style="--bs-btn-border-width: 2px;" href="{{ url_for('rider_login') }}">Login</a></li>
            </ul>
        </div>
</header>

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-10 col-md-10 col-12">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="col-12">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            <div class="card">
                <div class="card-header text-center top-nav text-black">
                    <h4 class="m-0">Riders Registration Form</h4>
                </div>
                <div class="card-body">
                    <form id="form-rider-reg" action="/rider_registration" method="POST" enctype="multipart/form-data"> <!-- enctype="multipart/form-data" -->
                        <div id="rider-reg">
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_name" class="form-label">Full Name:</label>
                                    <p><input type="text" id="rider_name" name="rider_name" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Name" required></p>
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_email" class="form-label">Email:</label>
                                    <p><input type="email" id="rider_email" name="rider_email" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Email" required></p>
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_number" class="form-label">Phone Number:</label>
                                    <p><input type="text" id="rider_number" name="rider_number" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Number" required></p>
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_age" class="form-label">Age:</label>
                                    <p><input type="number" id="rider_age" name="rider_age" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Age" required></p>        
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="residential_address" class="form-label">Residential Address:</label>
                                    <p><input type="text" id="residential_address" name="residential_address" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Address" required></p>        
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_city" class="form-label">City:</label>
                                    <p><input type="text" id="rider_city" name="rider_city" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="City" required></p>        
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_state" class="form-label">State:</label>
                                    <p><input type="text" id="rider_state" name="rider_state" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your state" required></p>        
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="nin" class="form-label">National Identification Number (NIN):</label>
                                    <p><input type="text" id="nin" name="nin" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="NIN" required></p>        
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="acct_num" class="form-label">Account Number:</label>
                                    <p><input type="text" id="acct_num" name="acct_num" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Account Number" required></p>        
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="bank_name" class="form-label">Bank Name:</label>
                                    <p><input type="text" id="bank_name" name="bank_name" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Bank Name" required></p>        
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="rider_vehicle" class="form-label">Vehicle:</label>
                                    <p><input type="text" id="rider_vehicle" name="rider_vehicle" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Keke or Bike" required></p>        
                                </div>
                            </div>
                            <!-- for Guarantor's-->
                            <h4>Guarantor's Form</h4>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="guarantor_name" class="form-label">Guarantor Name:</label>
                                    <p><input type="text" id="guarantor_name" name="guarantor_name" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Guarantor Name" required></p>
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="guarantor_number" class="form-label">Guarantor Phone Number:</label>
                                    <p><input type="tel" id="guarantor_number" name="guarantor_number" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Guarantor Number" required></p>
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="guarantor_residential_address" class="form-label">Residential Address:</label>
                                    <p><input type="text" id="guarantor_residential_address" name="guarantor_residential_address" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Address" required></p>        
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="guarantor_relatioship" class="form-label">Relationship:</label>
                                    <p><input type="text" id="guarantor_relatioship" name="guarantor_relationship" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Relationship" required></p>        
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="guarantor_occupation" class="form-label">Occupation:</label>
                                    <p><input type="text" id="guarantor_occupation" name="guarantor_occupation" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Guarantor Occupation" required></p>
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="guarantor_state" class="form-label">State of Origin:</label>
                                    <p><input type="text" id="guarantor_state" name="guarantor_state" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your state of residence" required></p>        
                                </div>
                            </div>
                            <div class="row mb-2">
                                <div class="text-start mb-2">
                                    <label for="profile_picture" class="form-label">Click the box below to upload your profile picture:</label>
                                </div>
                                <div class="form-control border focus-ring d-flex p-0 mx-3" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48); height: 200px; width: 200px;">   
                                    <img id="profile-picture-preview" src="{{ url_for('static', filename='uploads/') }}" alt="Profile Picture" class="img-thumbnail" style="width: 100%; height: 100%; object-fit: cover; cursor: pointer;">
                                    <input type="file" id="profile_picture" name="profile_pictures" class="d-none" accept="image/*">
                                </div>

                                <script>
                                    // Profile picture preview (upload from file)
                                    document.getElementById('profile-picture-preview').addEventListener('click', function() {
                                        document.getElementById('profile_picture').click();
                                    });
                                
                                    document.getElementById('profile_picture').addEventListener('change', function(event) {
                                        const file = event.target.files[0];
                                        if (file) {
                                            const reader = new FileReader();
                                            reader.onload = function(e) {
                                                document.getElementById('profile-picture-preview').src = e.target.result;
                                            };
                                            reader.readAsDataURL(file);
                                        }
                                    });
                                </script>
                                <!-- Update Profile Picture End -->
                            </div>
                            <div class="mb-4 p-1">
                                <button type="submit" class="btn btn-md btn-stallion">Register</button>
                            </div>
                        </div>
                    </form>
                    <div class="text-center mt-3">
                        <p>Have an account? <a href="{{ url_for('rider_login') }}" class="text-decoration-none text-color">Login</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}